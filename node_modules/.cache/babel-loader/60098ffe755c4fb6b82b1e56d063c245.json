{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Vamsisai-2994\\\\REACT\\\\google-meet-clone\\\\src\\\\components\\\\Participants\\\\Participants.component.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef } from \"react\";\nimport \"./Participants.css\";\nimport { connect } from \"react-redux\";\nimport { Participant } from \"./Participant/Participant.component\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Participants = props => {\n  _s();\n  const videoRef = useRef(null);\n  let participantKey = Object.keys(props.participants);\n  useEffect(() => {\n    if (videoRef.current) {\n      videoRef.current.srcObject = props.stream;\n      videoRef.current.muted = true;\n    }\n  }, [props.currentUser, props.stream]);\n  const currentUser = props.currentUser ? Object.values(props.currentUser)[0] : null;\n  let gridCol = participantKey.length === 1 ? 1 : participantKey.length <= 4 ? 2 : 4;\n  const gridColSize = participantKey.length <= 4 ? 1 : 2;\n  let gridRowSize = participantKey.length <= 4 ? participantKey.length : Math.ceil(participantKey.length / 2);\n  const screenPresenter = participantKey.find(element => {\n    const currentParticipant = props.participants[element];\n    return currentParticipant.screen;\n  });\n  if (screenPresenter) {\n    gridCol = 1;\n    gridRowSize = 2;\n  }\n  const participants = participantKey.map((element, index) => {\n    const currentParticipant = props.participants[element];\n    const isCurrentUser = currentParticipant.currentUser;\n    if (isCurrentUser) {\n      return null;\n    }\n    const pc = currentParticipant.peerConnection;\n    const remoteStream = new MediaStream();\n    let curentIndex = index;\n    if (pc) {\n      pc.ontrack = event => {\n        event.streams[0].getTracks().forEach(track => {\n          remoteStream.addTrack(track);\n        });\n        const videElement = document.getElementById(`participantVideo${curentIndex}`);\n        if (videElement) videElement.srcObject = remoteStream;\n      };\n    }\n    return /*#__PURE__*/_jsxDEV(Participant, {\n      currentParticipant: currentParticipant,\n      curentIndex: curentIndex,\n      hideVideo: screenPresenter && screenPresenter !== element\n      // showAvatar={\n      //   !currentParticipant.video &&\n      //   !currentParticipant.screen &&\n      //   currentParticipant.name\n      // }\n    }, curentIndex, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }, this);\n  });\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      \"--grid-size\": gridCol,\n      \"--grid-col-size\": gridColSize,\n      \"--grid-row-size\": gridRowSize\n    },\n    className: `participants`,\n    children: [participants, /*#__PURE__*/_jsxDEV(Participant, {\n      currentParticipant: currentUser,\n      curentIndex: participantKey.length,\n      hideVideo: screenPresenter && !currentUser.screen,\n      videoRef: videoRef\n      // showAvatar={currentUser && !currentUser.video && !currentUser.screen}\n      ,\n      currentUser: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 73,\n    columnNumber: 5\n  }, this);\n};\n_s(Participants, \"PdMsmLAy5JKU3vCrhAlqGYQfKuA=\");\n_c = Participants;\nconst mapStateToProps = state => {\n  return {\n    participants: state.participants,\n    currentUser: state.currentUser,\n    stream: state.mainStream\n  };\n};\nexport default connect(mapStateToProps)(Participants);\nvar _c;\n$RefreshReg$(_c, \"Participants\");","map":{"version":3,"names":["React","useEffect","useRef","connect","Participant","Participants","props","videoRef","participantKey","Object","keys","participants","current","srcObject","stream","muted","currentUser","values","gridCol","length","gridColSize","gridRowSize","Math","ceil","screenPresenter","find","element","currentParticipant","screen","map","index","isCurrentUser","pc","peerConnection","remoteStream","MediaStream","curentIndex","ontrack","event","streams","getTracks","forEach","track","addTrack","videElement","document","getElementById","mapStateToProps","state","mainStream"],"sources":["C:/Users/Vamsisai-2994/REACT/google-meet-clone/src/components/Participants/Participants.component.js"],"sourcesContent":["import React, { useEffect, useRef } from \"react\";\r\nimport \"./Participants.css\";\r\nimport { connect } from \"react-redux\";\r\nimport { Participant } from \"./Participant/Participant.component\";\r\n\r\nconst Participants = (props) => {\r\n  const videoRef = useRef(null);\r\n  let participantKey = Object.keys(props.participants);\r\n  useEffect(() => {\r\n    if (videoRef.current) {\r\n      videoRef.current.srcObject = props.stream;\r\n      videoRef.current.muted = true;\r\n    }\r\n  }, [props.currentUser, props.stream]);\r\n\r\n  const currentUser = props.currentUser\r\n    ? Object.values(props.currentUser)[0]\r\n    : null;\r\n\r\n  let gridCol =\r\n    participantKey.length === 1 ? 1 : participantKey.length <= 4 ? 2 : 4;\r\n  const gridColSize = participantKey.length <= 4 ? 1 : 2;\r\n  let gridRowSize =\r\n    participantKey.length <= 4\r\n      ? participantKey.length\r\n      : Math.ceil(participantKey.length / 2);\r\n\r\n  const screenPresenter = participantKey.find((element) => {\r\n    const currentParticipant = props.participants[element];\r\n    return currentParticipant.screen;\r\n  });\r\n\r\n  if (screenPresenter) {\r\n    gridCol = 1;\r\n    gridRowSize = 2;\r\n  }\r\n  const participants = participantKey.map((element, index) => {\r\n    const currentParticipant = props.participants[element];\r\n    const isCurrentUser = currentParticipant.currentUser;\r\n    if (isCurrentUser) {\r\n      return null;\r\n    }\r\n    const pc = currentParticipant.peerConnection;\r\n    const remoteStream = new MediaStream();\r\n    let curentIndex = index;\r\n    if (pc) {\r\n      pc.ontrack = (event) => {\r\n        event.streams[0].getTracks().forEach((track) => {\r\n          remoteStream.addTrack(track);\r\n        });\r\n        const videElement = document.getElementById(\r\n          `participantVideo${curentIndex}`\r\n        );\r\n        if (videElement) videElement.srcObject = remoteStream;\r\n      };\r\n    }\r\n\r\n    return (\r\n      <Participant\r\n        key={curentIndex}\r\n        currentParticipant={currentParticipant}\r\n        curentIndex={curentIndex}\r\n        hideVideo={screenPresenter && screenPresenter !== element}\r\n        // showAvatar={\r\n        //   !currentParticipant.video &&\r\n        //   !currentParticipant.screen &&\r\n        //   currentParticipant.name\r\n        // }\r\n      />\r\n    );\r\n  });\r\n  return (\r\n    <div\r\n      style={{\r\n        \"--grid-size\": gridCol,\r\n        \"--grid-col-size\": gridColSize,\r\n        \"--grid-row-size\": gridRowSize,\r\n      }}\r\n      className={`participants`}\r\n    >\r\n      {participants}\r\n      <Participant\r\n        currentParticipant={currentUser}\r\n        curentIndex={participantKey.length}\r\n        hideVideo={screenPresenter && !currentUser.screen}\r\n        videoRef={videoRef}\r\n        // showAvatar={currentUser && !currentUser.video && !currentUser.screen}\r\n        currentUser={true}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    participants: state.participants,\r\n    currentUser: state.currentUser,\r\n    stream: state.mainStream,\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps)(Participants);\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}